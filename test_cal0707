from typing import Callable


def add(x: float, y: float) -> float:
    return x + y


def subtract(x: float, y: float) -> float:
    return x - y


def multiply(x: float, y: float) -> float:
    return x * y


def divide(x: float, y: float) -> float:
    if y == 0:
        raise ValueError("0으로 나눌 수 없습니다.")
    return x / y


def get_operation(choice: str) -> Callable[[float, float], float]:
    operations = {
        "1": add,
        "2": subtract,
        "3": multiply,
        "4": divide
    }
    if choice not in operations:
        raise ValueError("올바르지 않은 연산 선택입니다.")
    return operations[choice]


def main() -> None:
    print("안전한 계산기 프로그램입니다.")
    print("1: 덧셈 | 2: 뺄셈 | 3: 곱셈 | 4: 나눗셈")

    try:
        choice = input("원하는 연산을 선택하세요 (1/2/3/4): ").strip()
        operation = get_operation(choice)

        num1 = float(input("첫 번째 숫자를 입력하세요: "))
        num2 = float(input("두 번째 숫자를 입력하세요: "))

        result = operation(num1, num2)
        print(f"결과: {result}")

    except ValueError as ve:
        print(f"입력 오류: {ve}")
    except Exception as e:
        print(f"예상치 못한 오류가 발생했습니다: {e}")


if __name__ == "__main__":
    main()
